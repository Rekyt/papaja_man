<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="papaja: Reproducible APA manuscripts with R Markdown" />
<meta property="og:type" content="book" />


<meta property="og:description" content="<p>“”</p>" />
<meta name="github-repo" content="crsh/papaja_man" />

<meta name="author" content="Frederik Aust" />

<meta name="date" content="2017-10-28" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="<p>“”</p>">

<title>papaja: Reproducible APA manuscripts with R Markdown</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#preface">Preface</a></li>
<li class="has-sub"><a href="1-introduction.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li class="has-sub"><a href="1-1-motivation.html#motivation"><span class="toc-section-number">1.1</span> Motivation</a><ul>
<li><a href="1-1-motivation.html#reproducible-scientific-reports"><span class="toc-section-number">1.1.1</span> Reproducible scientific reports</a></li>
</ul></li>
<li class="has-sub"><a href="1-2-implementation.html#implementation"><span class="toc-section-number">1.2</span> Implementation</a><ul>
<li><a href="1-2-implementation.html#guiding-principles"><span class="toc-section-number">1.2.1</span> Guiding principles</a></li>
<li><a href="1-2-implementation.html#document-compilation"><span class="toc-section-number">1.2.2</span> Document compilation</a></li>
</ul></li>
<li><a href="1-3-alternatives.html#alternatives"><span class="toc-section-number">1.3</span> Alternatives</a></li>
<li class="has-sub"><a href="1-4-getting-started.html#getting-started"><span class="toc-section-number">1.4</span> Getting started</a><ul>
<li><a href="1-4-getting-started.html#software-requirements"><span class="toc-section-number">1.4.1</span> Software requirements</a></li>
<li><a href="1-4-getting-started.html#installing-papaja"><span class="toc-section-number">1.4.2</span> Installing papaja</a></li>
<li><a href="1-4-getting-started.html#creating-a-document"><span class="toc-section-number">1.4.3</span> Creating a document</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="2-r-markdown-components.html#r-markdown-components"><span class="toc-section-number">2</span> R Markdown components</a><ul>
<li class="has-sub"><a href="2-1-yaml-front-matter.html#yaml-front-matter"><span class="toc-section-number">2.1</span> YAML front matter</a><ul>
<li><a href="2-1-yaml-front-matter.html#manuscript-meta-data"><span class="toc-section-number">2.1.1</span> Manuscript meta data</a></li>
<li><a href="2-1-yaml-front-matter.html#rendering-options"><span class="toc-section-number">2.1.2</span> Rendering options</a></li>
</ul></li>
<li class="has-sub"><a href="2-2-body.html#body"><span class="toc-section-number">2.2</span> Body</a><ul>
<li><a href="2-2-body.html#markdown"><span class="toc-section-number">2.2.1</span> Markdown</a></li>
<li><a href="2-2-body.html#r-code"><span class="toc-section-number">2.2.2</span> R code</a></li>
</ul></li>
<li><a href="2-3-splitting-an-r-markdown-document.html#splitting-an-r-markdown-document"><span class="toc-section-number">2.3</span> Splitting an R Markdown document</a></li>
</ul></li>
<li class="has-sub"><a href="3-writing.html#writing"><span class="toc-section-number">3</span> Writing</a><ul>
<li class="has-sub"><a href="3-1-workflow.html#workflow"><span class="toc-section-number">3.1</span> Workflow</a><ul>
<li><a href="3-1-workflow.html#working-with-a-reference-manager"><span class="toc-section-number">3.1.1</span> Working with a reference manager</a></li>
</ul></li>
<li class="has-sub"><a href="3-2-citations.html#citations"><span class="toc-section-number">3.2</span> Citations</a><ul>
<li><a href="3-2-citations.html#conveiniently-inserting-citations-with-citr"><span class="toc-section-number">3.2.1</span> Conveiniently inserting citations with <code>citr</code></a></li>
<li><a href="3-2-citations.html#working-with-a-reference-manager-1"><span class="toc-section-number">3.2.2</span> Working with a reference manager</a></li>
<li><a href="3-2-citations.html#referencing-r-and-its-packages"><span class="toc-section-number">3.2.3</span> Referencing R and its packages</a></li>
</ul></li>
<li class="has-sub"><a href="3-3-tables.html#tables"><span class="toc-section-number">3.3</span> Tables</a><ul>
<li><a href="3-3-tables.html#alternatives-1"><span class="toc-section-number">3.3.1</span> Alternatives</a></li>
</ul></li>
<li class="has-sub"><a href="3-4-figures.html#figures"><span class="toc-section-number">3.4</span> Figures</a><ul>
<li><a href="3-4-figures.html#what-is-plotted"><span class="toc-section-number">3.4.1</span> What is plotted?</a></li>
</ul></li>
<li><a href="3-5-equations.html#equations"><span class="toc-section-number">3.5</span> Equations</a></li>
<li><a href="3-6-cross-referencing.html#cross-referencing"><span class="toc-section-number">3.6</span> Cross-referencing</a></li>
<li><a href="3-7-appendices.html#appendices"><span class="toc-section-number">3.7</span> Appendices</a></li>
</ul></li>
<li class="has-sub"><a href="4-reporting.html#reporting"><span class="toc-section-number">4</span> Reporting</a><ul>
<li class="has-sub"><a href="4-1-reporting-statistics.html#reporting-statistics"><span class="toc-section-number">4.1</span> Reporting statistics</a><ul>
<li><a href="4-1-reporting-statistics.html#htest-t-tests-correlations-etc."><span class="toc-section-number">4.1.1</span> htest (<span class="math inline">\(t\)</span> tests, correlations, etc.)</a></li>
<li><a href="4-1-reporting-statistics.html#lm-linear-regression"><span class="toc-section-number">4.1.2</span> lm (linear regression)</a></li>
<li><a href="4-1-reporting-statistics.html#anova-anova-anova.mlm-anova"><span class="toc-section-number">4.1.3</span> anova, Anova, Anova.mlm (ANOVA)</a></li>
<li><a href="4-1-reporting-statistics.html#report-statistical-analyses"><span class="toc-section-number">4.1.4</span> Report statistical analyses</a></li>
</ul></li>
<li><a href="4-2-caching.html#caching"><span class="toc-section-number">4.2</span> Caching</a></li>
</ul></li>
<li><a href="5-collaborative-writing.html#collaborative-writing"><span class="toc-section-number">5</span> Collaborative writing</a></li>
<li class="has-sub"><a href="6-publishing-manuscripts.html#publishing-manuscripts"><span class="toc-section-number">6</span> Publishing manuscripts</a><ul>
<li><a href="6-1-published-papers-written-using-papaja.html#published-papers-written-using-papaja"><span class="toc-section-number">6.1</span> Published papers written using papaja</a></li>
</ul></li>
<li class="has-sub"><a href="7-limitations.html#limitations"><span class="toc-section-number">7</span> Limitations</a><ul>
<li><a href="7-1-ms-word-caveat.html#ms-word-caveat"><span class="toc-section-number">7.1</span> MS word caveat</a></li>
</ul></li>
<li class="has-sub"><a href="8-future-directions.html#future-directions"><span class="toc-section-number">8</span> Future directions</a><ul>
<li class="has-sub"><a href="8-1-contributions.html#contributions"><span class="toc-section-number">8.1</span> Contributions</a><ul>
<li><a href="8-1-contributions.html#workflow-1"><span class="toc-section-number">8.1.1</span> Workflow</a></li>
<li><a href="8-1-contributions.html#wanted"><span class="toc-section-number">8.1.2</span> Wanted</a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="implementation" class="section level2">
<h2><span class="header-section-number">1.2</span> Implementation</h2>
<p><em>In this section we provide a quick overview of the software and the underlying design principles. Unless you are interested in these details it’s safe to skip this section.</em></p>
<div id="guiding-principles" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Guiding principles</h3>
<p>In our development of this package our design decisions are based on two guiding principles:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>papaja</code> documents are convertible</strong>. A central motivation for the development of the package was the experience that many (if not most) scientific journals in psychology require that the final version of a submitted manuscript be provided as a Microsoft Word or RTF document. We, thus, strive to employ solutions that work for both LaTeX and Word output formats even if it means that some of the functions are less versatile than they could be.</p></li>
<li><p><strong><code>papaja</code> does not compute</strong>. The package is meant to facilitate writing reports and manuscripts in APA style; it is <em>not</em> meant to analyse data. Functions provided in this package do as little computing as possible to grant authors maximal analytic flexibility. Moreover, limiting the amount of computing done by the package facilitates package maintenance.</p></li>
</ol>
<p>While we are guided by these principles, they are guidelines rather than commandments and we deviate from them if necessary. For example, <code>papaja</code> functions do compute statistics that should be routinely reported according to APA guidelines, such as confidence intervals, if they are not provided in the analysis output objects. We, however, try to enable customization and replacement of these defaults whenever we can.</p>
</div>
<div id="document-compilation" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Document compilation</h3>
<p>It is important to note that <code>papaja</code> builds on several existing R packages, which in turn build on other software, to compile the final document. This layered software design grants the package its capabilities but it comes at a cost: When compilation of a <code>papaja</code>-document throws an error it may not be immediately obvious to an inexperienced user, which part of the process failed. We, thus, provide an overview of the compilation process and the software involved.</p>
<p>The compilation process is outlined in Figure <a href="1-2-implementation.html#fig:compilation-process-diagram">1.1</a>. As detailed in the <a href="2-r-markdown-components.html#r-markdown-components">R Markdown components</a> section, an R Markdown document consists of three components: A YAML front matter that contains document meta data, prose written in markdown (and optionally LaTeX) syntax, and R code in so-called <em>code chunks</em>.</p>
<p>Additionally, the R code contained in an R Markdown document usually accesses data that are either stored in a file on the computers hard drive or a database on the local network or internet. When the document is compiled either by calling <code>rmarkdown::render()</code> or by clicking the Knit-button in RStudio, the YAML front matter is parsed. Errors during this processing step are usually due to erroneous YAML syntax and start with <code>Error in yaml::yaml.load(enc2utf8(string), ...) :</code>. Next, the R code inside the R Markdown document is executed sequentially from top to bottom of the document and the resulting output is inserted into the document in markdown syntax. Any figures that are generated during the execution of the R code are stored to the hard drive and embedded into the markdown document. The R code is executed in a new R session with an empty workspace, no attached packages, and with the working directory set to the path of the R Markdown file. If any portion of the R code throws an error the compilation is aborted. In RStudio the debugger will point to the first line of the R code chunk that threw the error—not the exact line responsible for the error—and report the error message. R error messages usually start with <code>Error:</code>, for example, <code>Error: Object 'experiment_data' not found.</code></p>
<div class="figure" style="text-align: center"><span id="fig:compilation-process-diagram"></span>
<img src="compilation_process.png" alt="Process diagram illustrating the compilation of reproducible reports written with `papaja`. Boxes represent input files, diamonds represent compiling software, and ovals represent output files. Dashed components are either implicit (components of R Markdown files) or by default deleted after the compilation and, thus, invisible to the user."  />
<p class="caption">
Figure 1.1: Process diagram illustrating the compilation of reproducible reports written with <code>papaja</code>. Boxes represent input files, diamonds represent compiling software, and ovals represent output files. Dashed components are either implicit (components of R Markdown files) or by default deleted after the compilation and, thus, invisible to the user.
</p>
</div>
<p>After the R code has been executed the <code>bookdown</code> document format <code>pdf_document2()</code> or <code>word_document2()</code>, respectively, provides functions that enable the cross-referencing syntax <code>\@ref()</code> described in the <a href="3-6-cross-referencing.html#cross-referencing">Cross-referencing</a> section. Incorrect use of the cross-referencing syntax typically does not interfere with the document compilation but is apparent from missing or incorrect cross-references in the compiled document, e.g. instead of a figure number the document may contain the figure handle such as <code></code>. The result of this processing step is a pure markdown document containing only a YAML header, prose in markdown (and optionally LaTeX) syntax and rendered images in PDF, EPS, PNG, and TIFF formats at 300 dpi as set by <code>apa6_pdf()</code> or <code>apa6_word()</code>, respectively.</p>
<p>The mardown document, images and an optional BiB(La)TeX file that contains bibliographic information are the input to the next processing step. <code>rmarkdown::render()</code> assambles a system call to pandoc that is supplemented by <code>papaja</code> to include a call to an additional filter and can be further customized by the user. pandoc parses the contents of the markdown file and translates it into an abstrac syntax tree (AST). The <code>pandoc-citeproc</code> filter is than applied to the AST to replace the citation markup by the citation text and insert a reference section. As detailed in the <a href="3-2-citations.html#citations">Citations</a> section, <code>pandoc-citeproc</code> relies on the <a href="http://citationstyles.org/">citation styles language</a> (CSL), an XML-based specification of citation and bibliography formatting rules. Unfortunately, CSL does not support in-text citations. To overcome this limitation, <code>pandoc-citeproc</code> provides a separate syntax for in-text citations, which is based on the same CSL style. As a result the CSL APA6 style uses ampersands for all citations, including in-text citations, defying the APA citation style. That is why <code>papaja</code> provides an additional R-based filter that is applied to the AST to replace ampersands in in-text citations with the word <em>and</em>.</p>
<p>After all filters have been applied to the AST pandoc converts the document into the target output format, that is, PDF or DOCX. To create DOCX-documents <code>papaja</code> provides a reference DOCX-file containing page setup and style definitions that pandoc uses to create the manuscript file. That is, pandoc translates the AST directly to the office open XML format. To create PDF-documents pandoc in turn relies on LaTeX, that is, pandoc translates the AST to a TeX-file based on a templated provided by <code>papaja</code>. The TeX-file template invokes the <code>apa6</code> LaTeX document class [@???] and loads several additional LaTeX packages. pandoc then generates a system call to LaTeX to render the PDF document. During this processing step, that is, following the pandoc system calls, errors are due to failures of LaTeX to compile the TeX-file and usually start with <code>!</code>, for example, <code>! Undefined control sequence.</code> or <code>! Missing $ inserted</code>.</p>
</div>
</div>
<p style="text-align: center;">
<a href="1-1-motivation.html"><button class="btn btn-default">Previous</button></a>
<a href="1-3-alternatives.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
