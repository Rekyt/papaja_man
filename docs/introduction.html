<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>papaja: Reproducible APA manuscripts with R Markdown</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="<p>“”</p>">
  <meta name="generator" content="bookdown 0.2.5 and GitBook 2.6.7">

  <meta property="og:title" content="papaja: Reproducible APA manuscripts with R Markdown" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>“”</p>" />
  <meta name="github-repo" content="crsh/papaja_man" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="papaja: Reproducible APA manuscripts with R Markdown" />
  
  <meta name="twitter:description" content="<p>“”</p>" />
  

<meta name="author" content="Frederik Aust">


<meta name="date" content="2016-11-24">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="r-markdown-components.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./" ><b>papaja: Reproducible APA<br \>manuscripts with R Markdown</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#reproducible-scientific-reports"><i class="fa fa-check"></i><b>1.1.1</b> Reproducible scientific reports</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#implementation"><i class="fa fa-check"></i><b>1.2</b> Implementation</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#guiding-principles"><i class="fa fa-check"></i><b>1.2.1</b> Guiding principles</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction.html"><a href="introduction.html#document-compilation"><i class="fa fa-check"></i><b>1.2.2</b> Document compilation</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#alternatives"><i class="fa fa-check"></i><b>1.3</b> Alternatives</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#getting-started"><i class="fa fa-check"></i><b>1.4</b> Getting started</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#software-requirements"><i class="fa fa-check"></i><b>1.4.1</b> Software requirements</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction.html"><a href="introduction.html#installing-papaja"><i class="fa fa-check"></i><b>1.4.2</b> Installing papaja</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction.html"><a href="introduction.html#creating-a-document"><i class="fa fa-check"></i><b>1.4.3</b> Creating a document</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-markdown-components.html"><a href="r-markdown-components.html"><i class="fa fa-check"></i><b>2</b> R Markdown components</a><ul>
<li class="chapter" data-level="2.1" data-path="r-markdown-components.html"><a href="r-markdown-components.html#yaml-front-matter"><i class="fa fa-check"></i><b>2.1</b> YAML front matter</a><ul>
<li class="chapter" data-level="2.1.1" data-path="r-markdown-components.html"><a href="r-markdown-components.html#manuscript-meta-data"><i class="fa fa-check"></i><b>2.1.1</b> Manuscript meta data</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-markdown-components.html"><a href="r-markdown-components.html#rendering-options"><i class="fa fa-check"></i><b>2.1.2</b> Rendering options</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-markdown-components.html"><a href="r-markdown-components.html#body"><i class="fa fa-check"></i><b>2.2</b> Body</a><ul>
<li class="chapter" data-level="2.2.1" data-path="r-markdown-components.html"><a href="r-markdown-components.html#markdown"><i class="fa fa-check"></i><b>2.2.1</b> Markdown</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-markdown-components.html"><a href="r-markdown-components.html#r-code"><i class="fa fa-check"></i><b>2.2.2</b> R code</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-markdown-components.html"><a href="r-markdown-components.html#splitting-an-r-markdown-document"><i class="fa fa-check"></i><b>2.3</b> Splitting an R Markdown document</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="writing.html"><a href="writing.html"><i class="fa fa-check"></i><b>3</b> Writing</a><ul>
<li class="chapter" data-level="3.1" data-path="writing.html"><a href="writing.html#workflow"><i class="fa fa-check"></i><b>3.1</b> Workflow</a><ul>
<li class="chapter" data-level="3.1.1" data-path="writing.html"><a href="writing.html#working-with-a-reference-manager"><i class="fa fa-check"></i><b>3.1.1</b> Working with a reference manager</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="writing.html"><a href="writing.html#citations"><i class="fa fa-check"></i><b>3.2</b> Citations</a><ul>
<li class="chapter" data-level="3.2.1" data-path="writing.html"><a href="writing.html#conveiniently-inserting-citations-with-citr"><i class="fa fa-check"></i><b>3.2.1</b> Conveiniently inserting citations with <code>citr</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="writing.html"><a href="writing.html#referencing-r-and-its-packages"><i class="fa fa-check"></i><b>3.2.2</b> Referencing R and its packages</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="writing.html"><a href="writing.html#tables"><i class="fa fa-check"></i><b>3.3</b> Tables</a><ul>
<li class="chapter" data-level="3.3.1" data-path="writing.html"><a href="writing.html#alternatives-1"><i class="fa fa-check"></i><b>3.3.1</b> Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="writing.html"><a href="writing.html#figures"><i class="fa fa-check"></i><b>3.4</b> Figures</a></li>
<li class="chapter" data-level="3.5" data-path="writing.html"><a href="writing.html#equations"><i class="fa fa-check"></i><b>3.5</b> Equations</a></li>
<li class="chapter" data-level="3.6" data-path="writing.html"><a href="writing.html#cross-referencing"><i class="fa fa-check"></i><b>3.6</b> Cross-referencing</a></li>
<li class="chapter" data-level="3.7" data-path="writing.html"><a href="writing.html#appendices"><i class="fa fa-check"></i><b>3.7</b> Appendices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reporting.html"><a href="reporting.html"><i class="fa fa-check"></i><b>4</b> Reporting</a><ul>
<li class="chapter" data-level="4.1" data-path="reporting.html"><a href="reporting.html#reporting-statistics"><i class="fa fa-check"></i><b>4.1</b> Reporting statistics</a><ul>
<li class="chapter" data-level="4.1.1" data-path="reporting.html"><a href="reporting.html#htest-t-tests-correlations-etc."><i class="fa fa-check"></i><b>4.1.1</b> htest (t-tests, correlations, etc.)</a></li>
<li class="chapter" data-level="4.1.2" data-path="reporting.html"><a href="reporting.html#lm-linear-regression"><i class="fa fa-check"></i><b>4.1.2</b> lm (linear regression)</a></li>
<li class="chapter" data-level="4.1.3" data-path="reporting.html"><a href="reporting.html#anova-anova-anova.mlm-anova"><i class="fa fa-check"></i><b>4.1.3</b> anova, Anova, Anova.mlm (ANOVA)</a></li>
<li class="chapter" data-level="4.1.4" data-path="reporting.html"><a href="reporting.html#report-statistical-analyses"><i class="fa fa-check"></i><b>4.1.4</b> Report statistical analyses</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reporting.html"><a href="reporting.html#caching"><i class="fa fa-check"></i><b>4.2</b> Caching</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="collaborative-writing.html"><a href="collaborative-writing.html"><i class="fa fa-check"></i><b>5</b> Collaborative writing</a></li>
<li class="chapter" data-level="6" data-path="publishing-manuscripts.html"><a href="publishing-manuscripts.html"><i class="fa fa-check"></i><b>6</b> Publishing manuscripts</a><ul>
<li class="chapter" data-level="6.1" data-path="publishing-manuscripts.html"><a href="publishing-manuscripts.html#published-papers-written-using-papaja"><i class="fa fa-check"></i><b>6.1</b> Published papers written using papaja</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="limitations.html"><a href="limitations.html"><i class="fa fa-check"></i><b>7</b> Limitations</a><ul>
<li class="chapter" data-level="7.1" data-path="limitations.html"><a href="limitations.html#ms-word-caveat"><i class="fa fa-check"></i><b>7.1</b> MS word caveat</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="future-directions.html"><a href="future-directions.html"><i class="fa fa-check"></i><b>8</b> Future directions</a><ul>
<li class="chapter" data-level="8.1" data-path="future-directions.html"><a href="future-directions.html#contributions"><i class="fa fa-check"></i><b>8.1</b> Contributions</a><ul>
<li class="chapter" data-level="8.1.1" data-path="future-directions.html"><a href="future-directions.html#workflow-1"><i class="fa fa-check"></i><b>8.1.1</b> Workflow</a></li>
<li class="chapter" data-level="8.1.2" data-path="future-directions.html"><a href="future-directions.html#wanted"><i class="fa fa-check"></i><b>8.1.2</b> Wanted</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/crsh/papaja" target="blank">papaja on GitHub</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">papaja: Reproducible APA manuscripts with R Markdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>papaja is short for ‘preparing APA journal articles’ and is the name of this R package designed to create fully reproducible journal articles that seamlessly fuse statistical analyses, simulations, and prose. A manuscript written with <code>papaja</code> can be thought of as an extensively commented analysis script ready for publication in a scientific journal.</p>
<div id="motivation" class="section level2">
<h2><span class="header-section-number">1.1</span> Motivation</h2>
<p>APA style is one of the major style regimes in academia concerned with written scientific communication and is defined in the <em>Publication Manual of the American Psychological Association</em> <span class="citation">(APA; American Psychological Association, <a href="#ref-american_psychological_association_publication_2010">2010</a>)</span>. Research in psychology and many fields other, including other social sciences, medicine, and public health is reported in APA style. If you want to publish psychological research, you will have to produce properly formatted APA style manuscripts. While the merits of standardizing scientific reporting are undisputed, mastering the currently 272 pages of Publication Manual’s style definitions puts an undeniable burden on authors. To simplify the writing process researchers have developed strategies to automate the implementation of APA style.</p>
<p>The dominant approach to writing scientific reports in psychology is the use of common word processors such as Microsoft Word or Libre Office. Available APA style document templates set up page margins, line spacing, fonts, and related aspects of the manuscript. The format of citations and references can be automated by using references managers that integrate with the word processor, such as <a href="https://www.zotero.org/">Zotero</a>.</p>
<p>Far less common in psychology, is the use of markup systems, such as <a href="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a> or <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>. A key concept of markup systems is to separate style from content by means of document annotations. These annotations declare portions of text for example as title, section headings, or list items but, crucially, they are agnostic to what this means visually (e.g., <code>&lt;emphasize&gt;text&lt;/emphasize&gt;</code> instead of <em>text</em>). There are several advantages to this approach but, curcially for the present purpose, markup system compile plain text files to produce the final document. Critically, the compilation process is required for fully reproducible scientific reports.</p>
<div id="reproducible-scientific-reports" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Reproducible scientific reports</h3>
<p>Dynamic scientific reports fuse prose and simulation or analysis scripts <span class="citation">(Gandrud, <a href="#ref-gandrud_reproducible_2013">2013</a>; Xie, <a href="#ref-R-knitr">2015</a>)</span>. Each time a dynamic document is compiled, the scripts are executed anew and the results—statistics, tables, and figures—are recreated and inserted into the document. Thereby dynamic documents allow automated reporting of results, which is currently not possible with the prevalent use of Microsoft Word or Libre Office. Importantly, dynamic documents ensure that the results reported in the manuscript are free of rounding or transcription errors and correspond to the performed analyses. This is the reason why dynamic scientific reports are commonly refered to as reproducible scientific reports or reproducible reports. Thus, the term reproducibility here means that given a dataset and analysis script any analyst obtains the same statistical results <span class="citation">(Asendorpf et al., <a href="#ref-asendorpf_recommendations_2013">2013</a>; Cacioppo, Kaplan, Krosnick, Olds, &amp; Dean, <a href="#ref-cacioppo_social_2015">2015</a>)</span>.</p>
<p>The importance of reproducibility was pinpointed by the U.S. National Science Foundation subcommittee on replicability in science:</p>
<blockquote>
<p>Reproducibility is a minimum necessary condition for a finding to be believable and informative. <span class="citation">(p. 4, Cacioppo et al., <a href="#ref-cacioppo_social_2015">2015</a>)</span></p>
</blockquote>
<!--

http://www.ncbi.nlm.nih.gov/pubmed/24886202
Bakker, M. & Wicherts, J. M. (2011). The (mis)reporting of statistical results in psychology journals. Behavior Research Methods, 43, 666-678.
    "18% of statistical results in the psychological literature are incorrectly reported [...]  around 15% of the articles contained at least one statistical conclusion that proved, upon recalculation, to be incorrect"

The Prevalence of Statistical Reporting Errors in Psychology (1985-2013)
https://osf.io/e9qbp/

Study: 31 emailed requests for data to replicate SEMs yield 4 positive answers (87% non-reps)
http://t.co/gClUQgoKtL http://t.co/88l0eUJIbf

Statistical Reporting Errors and Collaboration on Statistical Analyses in Psychological Science
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0114876


49% of econ paper results were successfully reproduced with original data and code, and help from original authors: http://t.co/13UUbwaD8x


Of the subset of articles that were amenable to testing with the GRIM technique (N = 71), around half (N = 36; 50.7%) appeared to contain at least one reported mean inconsistent with the reported sample sizes and scale characteristics, and more than 20% (N = 16) contained multiple such inconsistencies. We requested the data sets corresponding to 21 of these articles, receiving positive responses in 9 cases. We were able to confirm the presence of at least one reporting error in all cases, with 2 articles requiring extensive corrections.
https://peerj.com/preprints/2064/



http://www.plosmedicine.org/article/info:doi/10.1371/journal.pmed.1001747
http://biostatistics.oxfordjournals.org/content/11/3/385.full
http://www.r-bloggers.com/translate2r-migrate-spss-scripts-to-r-at-the-push-of-a-button/

http://osc.centerforopenscience.org/2014/10/30/reproducible-reporting/


Fanelli D (2013) Only reporting guidelines can save (soft) science. European Journal of Personality 27(2): 124
    "Good research practices notwithstanding, therefore, the keys to good science are good reporting practices, which, interestingly, are much easier to ensure. Indeed, reporting guidelines are rapidly being adopted in biomedical and clinical research, where initiatives such as the EQUATOR Network (http://www.equator-network.org) and Minimum Information about a Biomedical or Biological Investigation (http://mibbi.sourceforge.net) publish updated lists of details that authors need to provide, depending on what methodology they used. Major journals have adopted these guidelines spontaneously because doing so improves their reputation. If authors do not comply, their papers are rejected."


More references: http://de.scribd.com/doc/71234390/The-Joy-of-Sweave-A-Beginner-s-Guide-to-Reproducible-Research-with-Sweave


The first article about #APAStyle was published in the Feb 1929 issue of Psychological Bulletin! #TBT @apa_journals http://t.co/1e5CMBqfv8

Willingness to Share Research Data Is Related to the Strength of the Evidence and the Quality of Reporting of Statistical Results
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0026828


Sharing Detailed Research Data Is Associated with Increased Citation Rate
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0000308



A first complication is conceptual, because arguably little benefit accrues if another researcher simply clicks “go” or “run” and produces the same numbers from the same data and source code as a previous researcher. Arguably, more would be gained by an independent re-analysis, whereby the second analyst seeks to reproduce the reported results from the raw data and without being guided (and potentially misled) by the first analyst’s code. However, should a second independent analysis yield incompatible results, then access to the original source code can help resolve those discrepancies.

But this is where the second complication arises: the technicalities of sharing source code are also non-trivial. There are obstacles that arise from the use of different platforms (Windows vs. Mac vs. Linux), or from issues such as missing external libraries or tacit assumptions about local directory structures. Ideally, therefore, the source code and data should be prepared in a manner that avoids such pernickety and annoying glitches.

http://www.psychonomic.org/featured-content-detail/go-check-ts-6b6-27c-transparent-workflow-tools-sci




Researchers from the United States Federal Reserve and the Department of the Treasury tried to replicate the results from 67 papers across 13 prestigious journals, but even after contacting authors when necessary, they were successful in only 49 per cent of cases where the data were not confidential and the researchers had the right software to analyse it.

the main reason for being unable to replicate findings was an inability to find the right data or the computer code that produced the original results, even after contacting the authors. Code was missing crucial functions, or certain variables were absent from the data, the paper says.

However, in nine cases for which the authors of the paper had the right dataset and code, they nonetheless got a different result or the code failed to finish executing

Is Economics Research Replicable? Sixty Published Papers fromThirteen Journals Say ”Usually Not”
http://www.federalreserve.gov/econresdata/feds/2015/files/2015083pap.pdf
http://theconversation.com/the-replication-crisis-has-engulfed-economics-49202


It finds that of the 24 empirical papers subjected to in-house replication review since September 2012, only four packages did not require any modifications. Most troubling, 14 packages (58%) had results in the paper that differed from those generated by the author’s own code.
http://journals.cambridge.org/action/displayAbstract?fromPage=online&aid=10269209&fileId=S1049096516000196



Beyond Bar and Line Graphs: Time for a New Data Presentation Paradigm
http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1002128


Peer review openness initiative: http://opennessinitiative.org/PRO_Initiative_RSOS.pdf


# Alternatives
- Sweave: http://link.springer.com/chapter/10.1007/978-3-642-57489-4_89
    -> Example of irreproducible research: http://www.nature.com/nm/journal/v13/n11/full/nm1107-1276b.html
- RepoRts

- Matlab-tool for reproducible analyses: http://link.springer.com/article/10.3758%2Fs13428-015-0616-x

- kmr



# Abstract

papar: Create publication-ready manuscripts in R

Recently, growing attention has been drawn to the large number of scientific findings that are not reproducible.
One aspect of this worrisome state of affairs, which is not limited to the field of psychology, is non-reproducibility of statistical analyses and scientific computations.
Given that raw data are available, the reproducibility of analyses should be considered a minimum standard for judging scientific claims (Peng, 2011).
Two obvious reasons for non-reproducibility of analyses are (1) incorrect and (2) incomplete reporting of methods and statistics. 
A review of psychological journal articles found that 18% of the statistical results were reported incorrectly; these errors lead to incorrect inferences in 15% of surveyed articles (Bakker & Wicherts, 2011).
Dynamic documents that merge report and analysis scripts are an effective way to avoid erronenous statistics in manuscripts (Gandrud, 2013).
We introduce the R package 'papaja' that builds on the 'knitr' package allowing authors to use the easy-to-learn Markdown syntax to harness the typesetting-power of LaTeX.
papaja-functions additionally ensures that all necessary statistics are reported to ensure reproducibility and facilitate future synthesis of results.



J of the American Statistical Association appoints ‘reproducibility editors’ to assure code and data are shared https://t.co/BsdpwPtets





papaja: Create publication-ready manuscripts in R

Recently, growing attention has been drawn to the large number of scientific findings that are not reproducible.
One aspect of this worrisome state of affairs, which is not limited to the field of psychology, is non-reproducibility of statistical analyses and scientific computations.
Given that raw data are available, the reproducibility of analyses should be considered a minimum standard for judging scientific claims (Peng, 2011).
Two obvious reasons for non-reproducibility of analyses are incorrect and incomplete reporting of methods and statistics.
A review of psychological journal articles found that 18% of the statistical results were reported incorrectly; these errors lead to incorrect inferences in 15% of surveyed articles (Bakker & Wicherts, 2011).
Dynamic documents that merge reports and analysis scripts are an effective way to avoid erroneous statistical reporting (Gandrud, 2013).
We introduce 'papaja', a package for the R Statistical Environment (R Core Team, 2014) that provides a framework to create dynamic documents that adhere to APA guidelines.
papaja is tailored to the needs of experimental psychologists: we supply convenience functions to report commonly used statistics in accordance with APA guidelines and in a way that ensures reproducibility of analyses and facilitates future synthesis of results.

-->
<p>R Markdown has been suggested as one possible framework for reproducible analyses <span class="citation">(<span class="citeproc-not-found" data-reference-id="R-rmarkdown"><strong>???</strong></span>)</span>. <code>papaja</code> is a R-package in the making including a <a href="http://rmarkdown.rstudio.com/">R Markdown</a> template that can be used with (or without) <a href="http://www.rstudio.com/">RStudio</a> to produce documents, which conform to the American Psychological Association (APA) manuscript guidelines (6th Edition). The package uses the document class <a href="http://www.ctan.org/pkg/apa6">apa6</a> and a .docx-reference file, so you can create PDF documents, or Word documents if you have to. Moreover, <code>papaja</code> supplies R-functions that facilitate reporting results of your analyses in accordance with APA guidelines.</p>
<p>Markdown is a simple formatting syntax that can be used to author HTML, PDF, and MS Word documents (among others). In the following I will assume you have hopped onto the band wagon and know how to use R Markdown to conduct and comment your analyses. If this is not the case, I recommend you get to grips with <a href="http://R%20Markdown.rstudio.com/">R Markdown</a> first. I use <a href="http://www.rstudio.com/">RStudio</a> (which makes use of <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>) to create my documents, but the general process works using any other text editor.</p>
</div>
</div>
<div id="implementation" class="section level2">
<h2><span class="header-section-number">1.2</span> Implementation</h2>
<p><em>In this section we provide a quick overview of the software and the underlying design principles. Unless you are interested in these details it’s safe to skip this section.</em></p>
<div id="guiding-principles" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Guiding principles</h3>
<p>In our development of this package our design decisions are based on two guiding principles:</p>
<ol style="list-style-type: decimal">
<li><p><strong><code>papaja</code> documents are convertible</strong>. A central motivation for the development of the package was the experience that many (if not most) scientific journals in psychology require that the final version of a submitted manuscript be provided as a Microsoft Word or RTF document. We, thus, strive to employ solutions that work for both LaTeX and Word output formats even if it means that some of the functions are less versatile than they could be.</p></li>
<li><p><strong><code>papaja</code> does not compute</strong>. The package is meant to facilitate writing reports and manuscripts in APA style; it is <em>not</em> meant to analyse data. Functions provided in this package do as little computing as possible to grant authors maximal analytic flexibility. Moreover, limiting the amount of computing done by the package facilitates package maintenance.</p></li>
</ol>
<p>While we are guided by these principles, they are guidelines rather than commandments and we deviate from them if necessary. For example, <code>papaja</code> functions do compute statistics that should be routinely reported according to APA guidelines, such as confidence intervals, if they are not provided in the analysis output objects. We, however, try to enable customization and replacement of these defaults whenever we can.</p>
</div>
<div id="document-compilation" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Document compilation</h3>
<p>It is important to note that <code>papaja</code> builds on several existing R packages, which in turn build on other software, to compile the final document. This layered software design grants the package its capabilities but it comes at a cost: When compilation of a <code>papaja</code>-document throws an error it may not be immediately obvious to an inexperienced user, which part of the process failed. We, thus, provide an overview of the compilation process and the software involved.</p>
<p>The compilation process is outlined in Figure <a href="introduction.html#fig:compilation-process-diagram">1.1</a>. As detailed in the <a href="r-markdown-components.html#r-markdown-components">R Markdown components</a> section, an R Markdown document consists of three components:</p>
<ol style="list-style-type: decimal">
<li>A YAML front matter that contains document meta data,</li>
<li>prose written in markdown (and optionally LaTeX) syntax, and</li>
<li>R code in so-called <em>code chunks</em>.</li>
</ol>
<p>Additionally, the R code contained in an R Markdown document usually accesses data that are either stored in a file on the computers hard drive or a database on the local network or internet. When the document is compiled either by calling <code>rmarkdown::render()</code> or by clicking the Knit-button in RStudio, the YAML front matter is parsed. Errors during this processing step are usually due to erroneous YAML syntax and start with <code>Error in yaml::yaml.load(enc2utf8(string), ...) :</code>. Next, the R code inside the R Markdown document is executed sequentially from top to bottom of the document and the resulting output is inserted into the document in markdown syntax. Any figures that are generated during the execution of the R code are stored to the hard drive and embedded into the markdown document. The R code is executed in a new R session with an empty workspace, no attached packages, and with the working directory set to the path of the R Markdown file. If any portion of the R code throws an error the compilation is aborted. In RStudio the debugger will point to the first line of the R code chunk that threw the error—not the exact line responsible for the error—and report the error message. R error messages usually start with <code>Error:</code>, for example, <code>Error: Object 'experiment_data' not found.</code></p>
<div class="figure" style="text-align: center"><span id="fig:compilation-process-diagram"></span>
<img src="compilation_process.png" alt="Process diagram illustrating the compilation of reproducible reports written with `papaja`. Boxes represent input files, diamonds represent compiling software, and ovals represent output files. Dashed components are either implicit (components of R Markdown files) or by default deleted after the compilation and, thus, invisible to the user." width="263" />
<p class="caption">
Figure 1.1: Process diagram illustrating the compilation of reproducible reports written with <code>papaja</code>. Boxes represent input files, diamonds represent compiling software, and ovals represent output files. Dashed components are either implicit (components of R Markdown files) or by default deleted after the compilation and, thus, invisible to the user.
</p>
</div>
<p>After the R code has been executed the <code>bookdown</code> document format <code>pdf_document2()</code> or <code>word_document2()</code>, respectively, provides functions that enable the cross-referencing syntax <code>\@ref()</code> described in the <a href="writing.html#cross-referencing">Cross-referencing</a> section. Incorrect use of the cross-referencing syntax typically does not interfere with the document compilation but is apparent from missing or incorrect cross-references in the compiled document, e.g. instead of a figure number the document may contain the figure handle such as <code></code>. The result of this processing step is a pure markdown document containing only a YAML header, prose in markdown (and optionally LaTeX) syntax and rendered images in PDF, EPS, PNG, and TIFF formats at 300 dpi as set by <code>apa6_pdf()</code> or <code>apa6_word()</code>, respectively.</p>
<p>The mardown document, images and an optional BiB(La)TeX file that contains bibliographic information are the input to the next processing step. <code>rmarkdown::render()</code> assambles a system call to pandoc that is supplemented by <code>papaja</code> to include a call to an additional filter and can be further customized by the user. pandoc parses the contents of the markdown file and translates it into an abstrac syntax tree (AST). The <code>pandoc-citeproc</code> filter is than applied to the AST to replace the citation markup by the citation text and insert a reference section. As detailed in the <a href="writing.html#citations">Citations</a> section, <code>pandoc-citeproc</code> relies on the <a href="http://citationstyles.org/">citation styles language</a> (CSL), an XML-based specification of citation and bibliography formatting rules. Unfortunately, CSL does not support in-text citations. To overcome this limitation, <code>pandoc-citeproc</code> provides a separate syntax for in-text citations, which is based on the same CSL style. As a result the CSL APA6 style uses ampersands for all citations, including in-text citations, defying the APA citation style. That is why <code>papaja</code> provides an additional R-based filter that is applied to the AST to replace ampersands in in-text citations with the word <em>and</em>.</p>
<p>After all filters have been applied to the AST pandoc converts the document into the target output format, that is, PDF or DOCX. To create DOCX-documents <code>papaja</code> provides a reference DOCX-file containing page setup and style definitions that pandoc uses to create the manuscript file. That is, pandoc translates the AST directly to the office open XML format. To create PDF-documents pandoc in turn relies on LaTeX, that is, pandoc translates the AST to a TeX-file based on a templated provided by <code>papaja</code>. The TeX-file template invokes the <code>apa6</code> LaTeX document class [@???] and loads several additional LaTeX packages. pandoc then generates a system call to LaTeX to render the PDF document. During this processing step, that is, following the pandoc system calls, errors are due to failures of LaTeX to compile the TeX-file and usually start with <code>!</code>, for example, <code>! Undefined control sequence.</code> or <code>! Missing $ inserted</code>.</p>
</div>
</div>
<div id="alternatives" class="section level2">
<h2><span class="header-section-number">1.3</span> Alternatives</h2>
<p>Needless to say, not all journals require manuscripts to be prepared according to APA guidelines. Other journal templates for the <code>rmarkdown</code> package are available in the <a href="https://github.com/rstudio/rticles"><code>rticles</code></a> package. It includes a set of templates for authoring of R related journal and conference submissions.</p>
<ul>
<li>papeR</li>
<li>reportR &amp; apaStyle</li>
<li>Sweave</li>
<li>schoRsch <span class="citation">(Pfister &amp; Janczyk, <a href="#ref-pfister_schorsch:_2016">2016</a>)</span></li>
<li>sigr</li>
</ul>
</div>
<div id="getting-started" class="section level2">
<h2><span class="header-section-number">1.4</span> Getting started</h2>
<div id="software-requirements" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Software requirements</h3>
<p>To use <code>papaja</code> you need to make sure the following software is installed on your computer:</p>
<ol style="list-style-type: decimal">
<li><strong><a href="http://www.r-project.org/">R</a> 2.11.1 or later</strong>.</li>
<li><strong><a href="http://johnmacfarlane.net/pandoc/">pandoc</a> 1.16 or later</strong>. If you work with <a href="http://www.rstudio.com/">RStudio</a> (0.98.932 or later) pandoc should already be installed, otherwise install pandoc using the <a href="https://github.com/rstudio/rmarkdown/blob/master/PANDOC.md">instructions for your operating system</a></li>
</ol>
<p>If you want to create PDF- in addition to DOCX-files you need</p>
<ol start="3" style="list-style-type: decimal">
<li><strong><a href="http://de.wikipedia.org/wiki/TeX">TeX</a> 2013 or later</strong>. Try <a href="http://miktex.org/">MikTeX</a> for Windows, <a href="https://tug.org/mactex/">MacTeX</a> for Mac, or <a href="http://www.tug.org/texlive/">TeX Live</a> for Linux. Some Linux users may need a few additional TeX packages for the LaTeX document class <code>apa6</code> to work:</li>
</ol>
<pre class="sh"><code>sudo apt-get install texlive texlive-publishers texlive-fonts-extra texlive-latex-extra texlive-humanities lmodern</code></pre>
<p>Although not necessary for the use of <code>papaja</code>, I recommend that you use a references manager, such as <a href="https://www.zotero.org/">Zotero</a>, to facilitate reference management and <a href="writing.html#citations">citations</a>.</p>
</div>
<div id="installing-papaja" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Installing papaja</h3>
<p>Once all that is taken care of, install <code>papaja</code> from GitHub.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install devtools package if necessary</span>
if(!<span class="st">&quot;devtools&quot;</span> %in%<span class="st"> </span><span class="kw">rownames</span>(<span class="kw">installed.packages</span>())) <span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)

<span class="co"># Install papaja</span>
devtools::<span class="kw">install_github</span>(<span class="st">&quot;crsh/papaja&quot;</span>)</code></pre></div>
<p><code>papaja</code> has not yet been submitted to CRAN because it is under active development. Currently, there are still a couple of loose ends we would like to tie up before we release the package to a larger audience. If you would like to contribute to speed up the process, have a look at the chapters <a href="limitations.html#limitations">Limitations</a> and <a href="future-directions.html#future-directions">Future directions</a>.</p>
</div>
<div id="creating-a-document" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Creating a document</h3>
<p>Once you have installed <code>papaja</code> and all other <a href="introduction.html#software-requirements">required software</a>, the APA manuscript template is available through the RStudio menus when creating a new R Markdown file, Figure <a href="introduction.html#fig:template-selection">1.3</a>.</p>
<div class="figure"><span id="fig:template-selection"></span>
<img src="https://raw.githubusercontent.com/crsh/papaja/master/inst/images/template_selection.png" alt="papaja's APA6 template is available through the RStudio menues."  />
<p class="caption">
Figure 1.3: papaja’s APA6 template is available through the RStudio menues.
</p>
</div>
<p>When you click RStudio’s <em>Knit</em> button (Figure <a href="introduction.html#fig:knit-button">1.4</a>) <code>papaja</code>, <code>rmarkdown,</code> and <code>knitr</code> work together to create an APA conform manuscript that includes both your manuscript text and the results of any embedded R code.</p>
<div class="figure"><span id="fig:knit-button"></span>
<img src="https://raw.githubusercontent.com/crsh/papaja/master/inst/images/knitting.png" alt="The *Knit* button in the RStudio."  />
<p class="caption">
Figure 1.4: The <em>Knit</em> button in the RStudio.
</p>
</div>
<p>If you don’t use RStudio, you can achieve the same result via the R command line. Use <code>rmarkdown::draft()</code> to create a new R Markdown file and <code>rmarkdown::render()</code> to render the document.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create new R Markdown file</span>
rmarkdown::<span class="kw">draft</span>(
  <span class="st">&quot;mymanuscript.Rmd&quot;</span>
  , <span class="st">&quot;apa6&quot;</span>
  , <span class="dt">package =</span> <span class="st">&quot;papaja&quot;</span>
  , <span class="dt">create_dir =</span> <span class="ot">FALSE</span>
  , <span class="dt">edit =</span> <span class="ot">FALSE</span>
)

<span class="co"># Render manuscript</span>
rmarkdown::<span class="kw">render</span>(<span class="st">&quot;mymanuscript.Rmd&quot;</span>)</code></pre></div>
<hr />
<p><code>papaja</code> is a R-package in the making including a <a href="http://rmarkdown.rstudio.com/">R Markdown</a> template that can be used with (or without) <a href="http://www.rstudio.com/">RStudio</a> to produce documents, which conform to the American Psychological Association (APA) manuscript guidelines (6th Edition). The package uses the LaTeX document class <a href="http://www.ctan.org/pkg/apa6">apa6</a> and a .docx-reference file, so you can create PDF documents, or Word documents if you have to. Moreover, <code>papaja</code> supplies R-functions that facilitate reporting results of your analyses in accordance with APA guidelines.</p>

<div class="rmdimportant">
Because <strong>knitr</strong> does not allow duplicate chunk labels in a source document, you need to make sure there are no duplicate labels in your book chapters, otherwise <strong>knitr</strong> will signal an error when knitting the merged Rmd file.
</div>
<p></p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-american_psychological_association_publication_2010">
<p>American Psychological Association. (2010). <em>Publication Manual of the American Psychological Association</em> (6th edition.). Washington, DC: American Psychological Association.</p>
</div>
<div id="ref-gandrud_reproducible_2013">
<p>Gandrud, C. (2013). <em>Reproducible Research with R and Rstudio</em> (Auflage: New.). Boca Raton: Crc Pr Inc.</p>
</div>
<div id="ref-R-knitr">
<p>Xie, Y. (2015). <em>Dynamic Documents with R and knitr</em> (2nd ed.). Boca Raton, Florida: Chapman; Hall/CRC. Retrieved from <a href="http://yihui.name/knitr/" class="uri">http://yihui.name/knitr/</a></p>
</div>
<div id="ref-asendorpf_recommendations_2013">
<p>Asendorpf, J. B., Conner, M., De Fruyt, F., De Houwer, J., Denissen, J. J. A., Fiedler, K., … Wicherts, J. M. (2013). Recommendations for Increasing Replicability in Psychology. <em>European Journal of Personality</em>, <em>27</em>(2), 108–119. doi:<a href="https://doi.org/10.1002/per.1919">10.1002/per.1919</a></p>
</div>
<div id="ref-cacioppo_social_2015">
<p>Cacioppo, J. T., Kaplan, R. M., Krosnick, J. A., Olds, J. L., &amp; Dean, H. (2015). <em>Social, Behavioral, and Economic Sciences Perspectives on Robust and Reliable Science</em> (Report of the Subcommittee on Replicability in Science). Arlington, VA: National Science Foundation. Retrieved from <a href="http://web.stanford.edu/group/bps/cgi-bin/wordpress/wp-content/uploads/2015/09/NSF-Robust-Research-Workshop-Report.pdf" class="uri">http://web.stanford.edu/group/bps/cgi-bin/wordpress/wp-content/uploads/2015/09/NSF-Robust-Research-Workshop-Report.pdf</a></p>
</div>
<div id="ref-pfister_schorsch:_2016">
<p>Pfister, R., &amp; Janczyk, M. (2016). schoRsch: An R Package for Analyzing and Reporting Factorial Experiments. <em>The Quantitative Methods for Psychology</em>, <em>12</em>(2), 147–151. doi:<a href="https://doi.org/10.20982/tqmp.12.2.p147">10.20982/tqmp.12.2.p147</a></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-markdown-components.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/crsh/papaja_man/edit/master/01-introduction.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
