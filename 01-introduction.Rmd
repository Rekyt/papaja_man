# Introduction

papaja is short for 'preparing APA journal articles' and is the name of this R package designed to create fully reproducible journal articles that seamlessly fuse statistical analyses, simulations, and prose.
A manuscript written with `papaja` can be thought of as an extensively commented analysis script ready for publication in a scientific journal.

## Motivation

APA style is not going anywhere. It is one of the major style regimes in academia and is used in many fields other than Psychology, including medical and other public health journals.

If you want to publish psychological research, you will have to produce properly formatted APA style manuscripts.

Don’t mix content and style

A general principle in typesetting — be it on (digital) paper or the web — is to separate content and style. Separation is commonly achieved through the use of a markup language, which is a system of document annotations. These annotations declare portions of text as title, section headings, or list items but crucially, they are agnostic to what this means visually (e.g., <bold>text</bold> instead of text). There are several advantages to this approach but I’ll only briefly name three of them here:

1. **Focus on writing**. It seems that a common form of procrastination for many writers is making a document pretty. Adding a newline here or a manual line break there, moving a table just two pixels to the left, etc. When writing a markup document in a plain text document it let’s you focus on the content rather than the style.
2. **Swiftly adjust the style**. If your paper is rejected and the next target journal prefers a different flavor of APA style, there is no need to touch your writing. As a simple example, I recently submitted a paper to a journal that asked me to collect all figure captions at the end of the document on one page rather than printing them below the corresponding figures. Because my captions were declared as such, I left the text unchanged (captions below the figures) and simply changed the option controlling the captions’ position within the document.
3. **Write plain text files**. Once you move to writing in plain text files, you open yourself up to a whole new world of very helpful tools to facilitate your writing and collaboration, such as dynamic documents or the version control system git, but that’s a topic for another blog post.


This is what is called a [dynamic document](http://en.wikipedia.org/wiki/Living_document) (Xie, 2013) and the topic of a future blog post.



<!--

http://www.ncbi.nlm.nih.gov/pubmed/24886202
Bakker, M. & Wicherts, J. M. (2011). The (mis)reporting of statistical results in psychology journals. Behavior Research Methods, 43, 666-678.
	"18% of statistical results in the psychological literature are incorrectly reported [...]  around 15% of the articles contained at least one statistical conclusion that proved, upon recalculation, to be incorrect"

The Prevalence of Statistical Reporting Errors in Psychology (1985-2013)
https://osf.io/e9qbp/

Study: 31 emailed requests for data to replicate SEMs yield 4 positive answers (87% non-reps)
http://t.co/gClUQgoKtL http://t.co/88l0eUJIbf

Statistical Reporting Errors and Collaboration on Statistical Analyses in Psychological Science
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0114876


49% of econ paper results were successfully reproduced with original data and code, and help from original authors: http://t.co/13UUbwaD8x


Of the subset of articles that were amenable to testing with the GRIM technique (N = 71), around half (N = 36; 50.7%) appeared to contain at least one reported mean inconsistent with the reported sample sizes and scale characteristics, and more than 20% (N = 16) contained multiple such inconsistencies. We requested the data sets corresponding to 21 of these articles, receiving positive responses in 9 cases. We were able to confirm the presence of at least one reporting error in all cases, with 2 articles requiring extensive corrections.
https://peerj.com/preprints/2064/



http://www.plosmedicine.org/article/info:doi/10.1371/journal.pmed.1001747
http://biostatistics.oxfordjournals.org/content/11/3/385.full
http://www.r-bloggers.com/translate2r-migrate-spss-scripts-to-r-at-the-push-of-a-button/

http://osc.centerforopenscience.org/2014/10/30/reproducible-reporting/

Gandrud, C. (2013). Reproducible research with R and RStudio. CRC Press.
Stodden, V., Leisch, F., & Peng, R. D. (Eds.). (2014). Implementing Reproducible Research. CRC Press.
Xie, Yihui. Dynamic Documents with R and knitr. CRC Press, 2013.


Fanelli D (2013) Only reporting guidelines can save (soft) science. European Journal of Personality 27(2): 124
	"Good research practices notwithstanding, therefore, the keys to good science are good reporting practices, which, interestingly, are much easier to ensure. Indeed, reporting guidelines are rapidly being adopted in biomedical and clinical research, where initiatives such as the EQUATOR Network (http://www.equator-network.org) and Minimum Information about a Biomedical or Biological Investigation (http://mibbi.sourceforge.net) publish updated lists of details that authors need to provide, depending on what methodology they used. Major journals have adopted these guidelines spontaneously because doing so improves their reputation. If authors do not comply, their papers are rejected."


More references: http://de.scribd.com/doc/71234390/The-Joy-of-Sweave-A-Beginner-s-Guide-to-Reproducible-Research-with-Sweave


The first article about #APAStyle was published in the Feb 1929 issue of Psychological Bulletin! #TBT @apa_journals http://t.co/1e5CMBqfv8

Willingness to Share Research Data Is Related to the Strength of the Evidence and the Quality of Reporting of Statistical Results
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0026828


Sharing Detailed Research Data Is Associated with Increased Citation Rate
http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0000308



A first complication is conceptual, because arguably little benefit accrues if another researcher simply clicks “go” or “run” and produces the same numbers from the same data and source code as a previous researcher. Arguably, more would be gained by an independent re-analysis, whereby the second analyst seeks to reproduce the reported results from the raw data and without being guided (and potentially misled) by the first analyst’s code. However, should a second independent analysis yield incompatible results, then access to the original source code can help resolve those discrepancies.

But this is where the second complication arises: the technicalities of sharing source code are also non-trivial. There are obstacles that arise from the use of different platforms (Windows vs. Mac vs. Linux), or from issues such as missing external libraries or tacit assumptions about local directory structures. Ideally, therefore, the source code and data should be prepared in a manner that avoids such pernickety and annoying glitches.

http://www.psychonomic.org/featured-content-detail/go-check-ts-6b6-27c-transparent-workflow-tools-sci




Researchers from the United States Federal Reserve and the Department of the Treasury tried to replicate the results from 67 papers across 13 prestigious journals, but even after contacting authors when necessary, they were successful in only 49 per cent of cases where the data were not confidential and the researchers had the right software to analyse it.

the main reason for being unable to replicate findings was an inability to find the right data or the computer code that produced the original results, even after contacting the authors. Code was missing crucial functions, or certain variables were absent from the data, the paper says.

However, in nine cases for which the authors of the paper had the right dataset and code, they nonetheless got a different result or the code failed to finish executing

Is Economics Research Replicable? Sixty Published Papers fromThirteen Journals Say ”Usually Not”
http://www.federalreserve.gov/econresdata/feds/2015/files/2015083pap.pdf
http://theconversation.com/the-replication-crisis-has-engulfed-economics-49202


It finds that of the 24 empirical papers subjected to in-house replication review since September 2012, only four packages did not require any modifications. Most troubling, 14 packages (58%) had results in the paper that differed from those generated by the author’s own code.
http://journals.cambridge.org/action/displayAbstract?fromPage=online&aid=10269209&fileId=S1049096516000196



Beyond Bar and Line Graphs: Time for a New Data Presentation Paradigm
http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1002128


Peer review openness initiative: http://opennessinitiative.org/PRO_Initiative_RSOS.pdf


# Alternatives
- Sweave: http://link.springer.com/chapter/10.1007/978-3-642-57489-4_89
	-> Example of irreproducible research: http://www.nature.com/nm/journal/v13/n11/full/nm1107-1276b.html
- RepoRts

- Matlab-tool for reproducible analyses: http://link.springer.com/article/10.3758%2Fs13428-015-0616-x

- PapeR

- kmr



# Abstract

papar: Create publication-ready manuscripts in R

Recently, growing attention has been drawn to the large number of scientific findings that are not reproducible.
One aspect of this worrisome state of affairs, which is not limited to the field of psychology, is non-reproducibility of statistical analyses and scientific computations.
Given that raw data are available, the reproducibility of analyses should be considered a minimum standard for judging scientific claims (Peng, 2011).
Two obvious reasons for non-reproducibility of analyses are (1) incorrect and (2) incomplete reporting of methods and statistics. 
A review of psychological journal articles found that 18% of the statistical results were reported incorrectly; these errors lead to incorrect inferences in 15% of surveyed articles (Bakker & Wicherts, 2011).
Dynamic documents that merge report and analysis scripts are an effective way to avoid erronenous statistics in manuscripts (Gandrud, 2013).
We introduce the R package 'papaja' that builds on the 'knitr' package allowing authors to use the easy-to-learn Markdown syntax to harness the typesetting-power of LaTeX.
papaja-functions additionally ensures that all necessary statistics are reported to ensure reproducibility and facilitate future synthesis of results.



J of the American Statistical Association appoints ‘reproducibility editors’ to assure code and data are shared https://t.co/BsdpwPtets





papaja: Create publication-ready manuscripts in R

Recently, growing attention has been drawn to the large number of scientific findings that are not reproducible.
One aspect of this worrisome state of affairs, which is not limited to the field of psychology, is non-reproducibility of statistical analyses and scientific computations.
Given that raw data are available, the reproducibility of analyses should be considered a minimum standard for judging scientific claims (Peng, 2011).
Two obvious reasons for non-reproducibility of analyses are incorrect and incomplete reporting of methods and statistics.
A review of psychological journal articles found that 18% of the statistical results were reported incorrectly; these errors lead to incorrect inferences in 15% of surveyed articles (Bakker & Wicherts, 2011).
Dynamic documents that merge reports and analysis scripts are an effective way to avoid erroneous statistical reporting (Gandrud, 2013).
We introduce 'papaja', a package for the R Statistical Environment (R Core Team, 2014) that provides a framework to create dynamic documents that adhere to APA guidelines.
papaja is tailored to the needs of experimental psychologists: we supply convenience functions to report commonly used statistics in accordance with APA guidelines and in a way that ensures reproducibility of analyses and facilitates future synthesis of results.

-->

As you may have heard, recently, interest in reproducible research has been growing.
Reproducible data analysis is an easy to implement and important aspect of the strive towards reproducibility.
For *R* users, R Markdown has been suggested as one possible framework for reproducible analyses.
`papaja` is a R-package in the making including a [R Markdown](http://rmarkdown.rstudio.com/) template that can be used with (or without) [RStudio](http://www.rstudio.com/) to produce documents, which conform to the American Psychological Association (APA) manuscript guidelines (6th Edition).
The package uses the \LaTeX document class [apa6](http://www.ctan.org/pkg/apa6) and a .docx-reference file, so you can create PDF documents, or Word documents if you have to.
Moreover, `papaja` supplies R-functions that facilitate reporting results of your analyses in accordance with APA guidelines.

Markdown is a simple formatting syntax that can be used to author HTML, PDF, and MS Word documents (among others).
In the following I will assume you have hopped onto the band wagon and know how to use R Markdown to conduct and comment your analyses.
If this is not the case, I recommend you get to grips with [R Markdown](http://R Markdown.rstudio.com/) first.
I use [RStudio](http://www.rstudio.com/) (which makes use of [pandoc](http://johnmacfarlane.net/pandoc/)) to create my documents, but the general process works using any other text editor.


## Implementation

*In this section we provide a quick overview of the software and the underlying design principles.
Unless you are interested in these details it's safe to skip this section.*

Quick technical overview (what software is involved, what are possible sources of error)


### Guiding principles
Our design decisions are based on two guiding principles: 


1. `papaja` **is convertible**.
A central motivation for the development of the package was the experience that many (if not most) scientific journals in psychology require that the final version of a submitted manuscript be Microsoft Word or documents.
We, thus, strive to employ solutions that work for both LaTeX and Word output formats even if it means that some of the functions are less versatile than they could be.

2. `papaja` **does not compute**.
The package is meant to facilitate writing reports and manuscripts in APA style; it is **not** meant to provide functions to analyse data.
Functions provided in this package do as few computations for you as possible to grant authors maximal flexibility to do all analyses as they see fit.[^maintenance]
That said, `papaja` functions do compute statistics that should be routinely reported according to APA guidelines, such as confidence intervals, if they are not provided in the analysis output objects.
We try to enable customization and replacement of these defaults whenever we can.

[^maintenance]: Moreover, limiting the amount of computing done by the package facilitates maintenance of its functions.


## Alternatives

Needless to say, not all journals require manuscripts to be prepared according to APA guidelines.
Other journal templates for the `rmarkdown` package are available in the [`rticles`](https://github.com/rstudio/rticles) package.
It includes a set of templates for authoring of R related journal and conference submissions.

- papeR
- reportR


## Getting started

### Software requirements

To use `papaja` you need to make sure the following software is installed on your computer:
  
@. **[R](http://www.r-project.org/) 2.11.1 or later**.
@. **[TeX](http://de.wikipedia.org/wiki/TeX) 2013 or later**. Try [MikTeX](http://miktex.org/) for Windows, [MacTeX](https://tug.org/mactex/) for Mac, or [TeX Live](http://www.tug.org/texlive/) for Linux. Some Linux users may need a few additional TeX packages for the LaTeX document class `apa6` to work:
    
```{sh ubuntu_extras, eval = FALSE}
sudo apt-get install texlive texlive-publishers texlive-fonts-extra texlive-latex-extra texlive-humanities lmodern
```

@. **[pandoc](http://johnmacfarlane.net/pandoc/) 1.16 or later**. If you work with [RStudio](http://www.rstudio.com/) (0.98.932 or later) pandoc should already be installed, otherwise install pandoc using the [instructions for your operating system](https://github.com/rstudio/rmarkdown/blob/master/PANDOC.md)


### Installing papaja
Once all that is taken care of, install `papaja` from GitHub.
  
```{r install_papapja, eval = FALSE}
# Install devtools package if necessary
if(!"devtools" %in% rownames(installed.packages())) install.packages("devtools")

# Install papaja
devtools::install_github("crsh/papaja")
```

`r not_on_cran`

### Creating a document

Once you have installed `papaja` and all other [required software][Software requirements], the APA manuscript template is available through the RStudio menus when creating a new R Markdown file, Figure  \@ref(fig:template-selection).

```{r template-selection, echo = FALSE, fig.cap = "papaja's APA6 template is available through the RStudio menues."}
include_graphics("https://raw.githubusercontent.com/crsh/papaja/master/inst/images/template_selection.png")
```

When you click RStudio's *Knit* button (Figure \@ref(fig:knit-button)) `papaja`, `rmarkdown,` and `knitr` work together to create an APA conform manuscript that includes both your manuscript text and the results of any embedded R code.

```{r knit-button, echo = FALSE, fig.cap = "The *Knit* button in the RStudio."}
include_graphics("https://raw.githubusercontent.com/crsh/papaja/master/inst/images/knitting.png")
```


If you don't use RStudio, you can achieve the same result via the R command line.
Use `rmarkdown::draft()` to create a new R Markdown file and `rmarkdown::render()` to render the document.

```{r new_document, eval = FALSE}
# Create new R Markdown file
rmarkdown::draft(
  "mymanuscript.Rmd"
  , "apa6"
  , package = "papaja"
  , create_dir = FALSE
  , edit = FALSE
)

# Render manuscript
rmarkdown::render("mymanuscript.Rmd")
```

---




`papaja` is a R-package in the making including a [R Markdown](http://rmarkdown.rstudio.com/) template that can be used with (or without) [RStudio](http://www.rstudio.com/) to produce documents, which conform to the American Psychological Association (APA) manuscript guidelines (6th Edition). The package uses the LaTeX document class [apa6](http://www.ctan.org/pkg/apa6) and a .docx-reference file, so you can create PDF documents, or Word documents if you have to. Moreover, `papaja` supplies R-functions that facilitate reporting results of your analyses in accordance with APA guidelines.


```{block2, type='rmdimportant'}
Because **knitr** does not allow duplicate chunk labels in a source document, you need to make sure there are no duplicate labels in your book chapters, otherwise **knitr** will signal an error when knitting the merged Rmd file. 
```